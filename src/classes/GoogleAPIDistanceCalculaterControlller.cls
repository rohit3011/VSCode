//
// Generated by JSON2Apex http://json2apex.herokuapp.com/
//

public class GoogleAPIDistanceCalculaterControlller{

    public List<String> destination_addresses;
    public List<String> origin_addresses;
    public List<Rows> rows;
    public String status;
    public Distance geoAddress{get;set;}
    public string fromStation{get;set;}
    public string toDestination{get;set;}
    public string geoAddress1{get;set;}
    
    public string distanceInMile{get;set;}
    public string distanceInHours{get;set;}
    
    public class Elements {
        public Distance distance;
        public Distance duration;
        public String status;
    }

    public class Distance {
        public String text;
        public Integer value;
    }

    public class Rows {
        public List<Elements> elements;
    }

    
    public static GoogleAPIDistanceCalculaterControlller parse(String json) {
        return (GoogleAPIDistanceCalculaterControlller) System.JSON.deserialize(json, GoogleAPIDistanceCalculaterControlller.class);
    }
    
    public pageReference Submit(){
        Http http = new Http();
        HttpRequest req = new HttpRequest();
        string apiKey = 'AIzaSyDkkbdNxHjvCe_qbj0tHsjBlAdal6bT6cc';
        string endPoint = 'https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=\''+fromStation+'\'&destinations=\''+toDestination+'\'&key=AIzaSyDkkbdNxHjvCe_qbj0tHsjBlAdal6bT6cc';
        req.setEndpoint(endPoint);
        req.setMethod('GET');
        system.debug('******fromStation'+fromStation);
        system.debug('******toDestination'+toDestination);
        system.debug('******'+endPoint);
        HttpResponse response = http.send(req);
        
        if (response.getStatusCode() == 200) {        
            //Map<String, Object> results = (Map<String, Object>)JSON.deserializeUntyped(response.getBody());
            //Map<String, Object> animal = (Map<String, Object>) results.get('animal');
            //animalName = (String)animal.get('name');
            JSON2Apex1 json = JSON2Apex1.parse(response.getBody());
            JSON2Apex1.Rows dis = new JSON2Apex1.Rows(); 
            system.debug('******'+json);
            system.debug('*****'+json.destination_addresses[0]);
            system.debug('*****'+json.Rows[0].Elements[0].distance.text);
            distanceInMile = json.Rows[0].Elements[0].distance.text;
            distanceInHours = json.Rows[0].Elements[0].duration.text;
        //    system.debug('*****'+json.Elements);
         //   system.debug('*****'+json.Distance);
        }  
        return null;
    }
}